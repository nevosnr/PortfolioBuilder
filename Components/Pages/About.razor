@using Microsoft.EntityFrameworkCore
@using PortfolioBuilder.Components
@using PortfolioBuilder.Data
@using PortfolioBuilder.Data.DTOs.CareerDTOs

@inject IDbContextFactory<PortfolioDbContext> DbContextFactory

@page "/about"

<PageTitle>All about Dave Neve</PageTitle>

<MudText Class="pa-10" Align="Align.Center" Typo="Typo.h4">Everything You Need to Know About Dave Neve</MudText>
<MudGrid>
	<MudItem xs="12">
		<MudText Typo="Typo.body1">
			This timeline content is hosted on an Azure SQL Database and through adopting a code-first design in .NET and Entity Framework, the DB was created in C#. Previous projects have adopted a Database-first approach which is 
			more relevant in enterprsie/industry as a datbase noramlly already exists. That being said I am able to develop in SQL, and create Tables, Views and stored procedures as required. 
			<br />
			As the timeline is hosted on Azure (on the free tier) there may be a delay in record retrival as the DB may have been placed in a paused state. The backend is programmed to retry 5 times in 15 seconds which should 
			be ample time for the instance to run up. If not, please navigate away and return to view the results.
			<br />
		</MudText>
	</MudItem>
	<MudItem xs="12">
		<MudCarousel TData="object" Class="mud-width-full" Style="width:270px; height:270px;" ShowArrows="true" ShowBullets=true>
			<MudCarouselItem Transition="Transition.Slide">
				<div data-iframe-width="150" data-iframe-height="270" data-share-badge-id="7a9a88c1-1eb0-4870-a73b-1c9c8e72ad2a" data-share-badge-host="https://www.credly.com"></div><script type="text/javascript" async src="//cdn.credly.com/assets/utilities/embed.js"></script>
			</MudCarouselItem>
			<MudCarouselItem Transition="Transition.Slide">
				<div data-iframe-width="150" data-iframe-height="270" data-share-badge-id="4a0bf72f-4de3-40d5-88cd-778e4a70d046" data-share-badge-host="https://www.credly.com"></div><script type="text/javascript" async src="//cdn.credly.com/assets/utilities/embed.js"></script>
			</MudCarouselItem>
			<MudCarouselItem Transition="Transition.Slide">
				<div class="d-flex" style="height:100%">
					<MudImage src="images/EngineeringTechnicianC.png" alt="" style="width:100%; height:100%;" ObjectFit="ObjectFit.Contain" />
				</div>
			</MudCarouselItem>
		</MudCarousel>
	</MudItem>
	<MudItem xs="12">
			<MudText Class="pa-5" Align="Align.Center" Color="Color.Error" Typo="Typo.body1"><strong>The card dialogs are still in development.</strong></MudText>
	</MudItem>
	<MudItem xs="12">
		@if (_isLoading)
		{
			<MudProgressCircular Color="Color.Primary" Indeterminate="true" Size="Size.Large" Class="ma-5" />
		}
		else
		{
			<MudTimeline>
				@foreach (var career in _careerRecordDTOs)
				{
					<MudTimelineItem Color="Color.Success" Size="Size.Medium" Elevation="25">
						<ItemOpposite>
							<MudGrid Class="pa-5">
								<MudIcon Color="Color.Default" Icon="@career._careerIcon"/>
								<MudText Color="Color.Primary" Typo="Typo.h5">@career._careerStartDate.ToString("MMM yyyy")</MudText>
							</MudGrid>
						</ItemOpposite>
						<ItemContent>
							<CareerCard
								careerRecord ="@career"/>
						</ItemContent>
					</MudTimelineItem>
				}
			</MudTimeline>			
		}
	</MudItem>
</MudGrid>


